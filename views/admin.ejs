<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/fontawesome-all.min.css">
    <link rel="stylesheet" href="/css/styles.css">

    <title>Admin page</title>
</head>

<body>
    <%- include('./header.ejs') %>
        <main class="blog-area main-section form-area">
            <form class="container quote-form" method="POST" action="/quoteSubmit">
                <div class="container">
                    <div class="form-group quote-form-heading">
                        <span>Enter your quotes here </span>
                    </div>
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Enter your name" name="username" id="username" />
                    </div>
                    <div class="form-group">
                        <textarea class="form-control" id="quotetext" name="quotetext" placeholder="Your quote here" aria-label="With textarea"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="exampleFormControlSelect2" style="float:left">Choose categories</label>
                        <select multiple="multiple" class="form-control selectpicker" name="categories" id="qcategories">
                            <option>Life</option>
                            <option>Motivation</option>
                            <option>Travel</option>
                            <option>Happiness</option>
                            <option>Money</option>
                        </select>
                    </div>
                    <div class="form-group btn-container">
                        <button type="submit" class="btn btn-primary">Submit</button>
                    </div>
                </div>
            </form>

        </main>

        <!-- Optional JavaScript -->
        <!-- jQuery first, then Popper.js, then Bootstrap JS -->
        <script src="js/libs/jquery-3.3.1.min.js"></script>
        <script src="js/libs/popper.min.js"></script>
        <script src="js/libs/bootstrap.min.js"></script>

        <script>
            $(document).ready(function () {

                $('form').on('submit', function (event) {
                    event.preventDefault();
                    var quoteData = {
                        username: $('#username').val(),
                        quoteText: $('#quotetext').val(),
                        categories: $('#qcategories').val()
                    }
                    quoteData = JSON.stringify(quoteData);

                    var ajaxRequest = $.ajax({
                        url: '/quoteSubmit',
                        method: 'POST',
                        dataType: 'application/json; charset=utf-8',
                        data: {quoteData}
                    }).done(function (message) {
                        console.log('done')

                    }).fail(function(){
                        console.log('fail');
                    });

                });

            });
        </script>
</body>

</html>